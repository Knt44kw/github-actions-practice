name: Events Demo 1
on:
  pull_request:
    types: opened # [opened, edited] のように複数のOR条件を指定できる
      # または以下のように複数条件の指定ができる
      # - opened
      # - edited
    branches:
      - "main"
      # - "develop*"
  # 他のイベントを追加したいときは、イベント同士のインデントのレベルを揃える
  workflow_dispatch:
  push:
    # 特定のブランチでEventが動くようにできる
    # その他の制御は 以下を参照
    # https://docs.github.com/ja/actions/using-workflows/workflow-syntax-for-github-actions#onpushbranchestagsbranches-ignoretags-ignore
    branches:
      - "main"
      # - "develop*"
      # - "feature-*" feature- 以降の文字列でも eventが動くようになる 
      # 階層が再帰的なブランチでもeventが動くようにする。以下の例でもeventが動く
      # - "feature/**" feature/new, feature/new/new2
    # path以下のファイルが変更されたとき Eventが動くように制御できる
    # また path-ignoreでパスを設定すると、そこで設定されたパス以下のファイルが変更されても Eventが動かないように制御できる
    # paths:
    #   - ".github/workflows/*"
# git commit -m "hoge [skip ci]" と書くと github actions内で ciを省略できる
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Output event data
        run: echo "${{ toJSON(github.event) }}"
      - name: Get code
        uses: actions/checkout@v3
      - name: Install dependencies
        run: npm ci
      - name: Test code
        run: npm run test
      - name: Build code
        run: npm run build
      - name: Deploy project
        run: echo "Deploying ...."