name: matrix demo
on: push
jobs:
  build:
    # 他のジョブが途中で失敗しても、workflow全体が正常終了するようにする
    continue-on-error: true
    strategy:
      # matrix: 変数を定義することで、変数の組み合わせに基づく複数のジョブ実行を自動的に作成できる。
      matrix:
        # 以下の組み合わせを総当りして並行に行う
        # 例: node-version=12に対して、{ubuntu, windows}-latestにしたときのstepsを実行。node-version=14,16の時も同様
        # node-version = 12だと失敗する
        node-version: [12, 14, 16]
        os: [ubuntu-latest, windows-latest]
    runs-on: ${{ matrix.os }}
    steps:
      - name: Get Code
        uses: actions/checkout@v3
      - name: Install NodeJS
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}
      - name: Install Dependencies
        run: npm ci
      - name: Build project
        run: npm run build